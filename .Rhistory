library(tidyverse);library(readxl)
getwd()
# Set the working directory -------------------------
dir <- getwd()
setwd(dir)
# Explore the files -------------------------------
fs::dir_ls()
data_list <- fs::dir_ls("KCYPS2010 m1[SPSS]", regexp = ".sav$")
data_list
# Import SPSS files
data_list <- fs::dir_ls("KCYPS2010 m1[SPSS]", regexp = ".sav$")
data_w1 <- foreign::read.spss(data_list[1],
use.value.labels = F,
to.data.frame = T)
data_w1
fs::dir_ls
# Explore the files -------------------------------
fs::dir_ls()
fs::dir_ls("KCYPS2010 m1[EXCEL]")
# Import EXCEL files
data_list <- fs::dir_ls("KCYPS2010 m1[EXCEL]", regexp = ".xlsx$")
data_list
data_w1 <- readxl::read_xlsx(data_list[1])
data_w1
# Generate folders
dir.exists("data")
getwd()
# Generate folders
dir.create("data")
dirname("data")
unlink("data")
library(lavaan)
MASS::mvrnorm(100, rep(0,4),
matrix(
c(
1,0,0,0,
0,1,0,0,
0,0,1,0,
0,0,0,1
),ncol = 4
))
data <- MASS::mvrnorm(100, rep(0,4),
matrix(
c(
1,0,0,0,
0,1,0,0,
0,0,1,0,
0,0,0,1
),ncol = 4
))
data <- data.frame(data)
data
name(data) <- c("X1","X2","Y1","Y2")
data <- data.frame(data)
data <- MASS::mvrnorm(100, rep(0,4),
matrix(
c(
1,0,0,0,
0,1,0,0,
0,0,1,0,
0,0,0,1
),ncol = 4
))
data <- data.frame(data)
names(data) <- c("X1","X2","Y1","Y2")
data
cov(data)
cor(data)
round(cov(data),2)
round(cor(data),2)
4 * (4 - 1) /2
4 * (4 + 1) / 2
data_container[[1]]
# Import multiple data
data_list <- fs::dir_ls("KCYPS2010 m1[EXCEL]")
data_container <- list()
data_container
data_list
# Import multiple data
data_list <- fs::dir_ls("KCYPS2010 m1[EXCEL]")
data_container <- list()
for(i in 1:length(data_list)) {
# i <- 2
data_w <- readxl::read_excel(data_list[i])
# names(data_w)
varName <- paste0("mean_selfes_w",i)
data_w <-
data_w %>%
select(ID,
starts_with("GENDER"),
starts_with("PSY2A")) %>%
rename_at(vars(contains('PSY2A')), ~(sub('PSY2A', 'selfes_', .))) %>%
rename_at(vars(contains('Gender')), ~(sub(., 'Gender', .))) %>%
na_if(., -9) %>%
mutate(
!!varName := rowMeans(select(., contains("selfes_")), na.rm = T)
) %>%
select(ID, Gender, matches("^mean_")) %>%
mutate(Gender = case_when(Gender == 1 ~ "Girl", TRUE ~ "Boy"))
data_container[[i]] <- data_w
}
unlink("data")
getwd()
# Generate folders
dir.create("data")
unlink("data")
# delete a directory -- must add recursive = TRUE
unlink("data", recursive = TRUE)
